<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin Dashboard</title>
  <link rel="stylesheet" href="admin.css">
</head>
<body>
  <div class="container">
    <h1>Admin Dashboard</h1>
    <section>
      <h2>Add New Subject</h2>
      <form action="/admin/subject" method="post" enctype="multipart/form-data">
        <label>Subject Name
          <input type="text" name="subject" required>
        </label>
        <label>Price
          <input type="number" step="0.01" name="price" required>
        </label>
        <label>Full PDF
          <input type="file" name="pdf" accept="application/pdf" required>
        </label>
        <label>Sample PDF
          <input type="file" name="samplePdf" accept="application/pdf">
        </label>
        <label>Image
          <input type="file" name="image" accept="image/*">
        </label>
        <button type="submit">Save</button>
      </form>
    </section>
    <section>
      <h2>Existing Subjects</h2>
      <table>
        <thead>
          <tr>
            <th>Subject</th>
            <th>Price</th>
            <th>Full PDF</th>
            <th>Sample PDF</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="subject-body"></tbody>
      </table>
    </section>
  </div>
  <script>
    fetch('/subjects').then(r => r.json()).then(data => {
      const tbody = document.getElementById('subject-body');
      data.forEach((s, idx) => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${s.name}</td>
          <td>${s.price || ''}</td>
          <td>${s.pdf ? `<a href="${s.pdf}">PDF</a>` : ''}</td>
          <td>${s.samplePdf ? `<a href="${s.samplePdf}">Sample</a>` : ''}</td>
          <td>
            <form class="update-form" action="/admin/update-price" method="post">
              <input type="hidden" name="index" value="${idx}">
              <input type="number" step="0.01" name="price" value="${s.price || ''}" placeholder="Price">
              <button type="submit">Update</button>
            </form>
          </td>`;
        tbody.appendChild(tr);
      });
    });
  </script>
</body>
</html>
